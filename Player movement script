extends KinematicBody2D

var velocity = Vector2.ZERO
var pathVector = Vector2.ZERO
const MAX_SPEED = 80
const ACCELERATION = 150 * 60
const FRICTION = 60 * 60
const GRAVITY = 25
const DEADZONE = 150

func _physics_process(delta):
	var mousePos = Vector2()
	var playerPos = Vector2()
	mousePos = get_global_mouse_position()
	playerPos = get_position()
	pathVector.x = mousePos.x - playerPos.x
	pathVector.y = mousePos.y - playerPos.y
	var vectorLength = pathVector.length()
	pathVector = pathVector.normalized()
	if vectorLength >= DEADZONE:
		velocity = velocity.move_toward(pathVector * MAX_SPEED * sqrt(vectorLength), ACCELERATION * delta)
	velocity.y += GRAVITY
	velocity = move_and_slide(velocity)
